# pltlt2tgba
A wrapper tool for adding pure-past subformulae to the input language of Spot's **ltl2tgba**.

## Installation instructions:
[ghc](https://www.haskell.org/ghc/) and [Cabal](https://www.haskell.org/cabal/) are required.  
After having installed ghc and Cabal and cloned the repository, execute the command `cabal install` from the root directory (where the .cabal file is located).

To use **pltl2tgba**, Spot must be installed and on the path. In particular, `ltl2tgba` and `autfilt` are used by **pltl2tgba**. See Spot's [website](https://spot.lre.epita.fr/) for download links and documentation.  
In addition, **ppLTLTT** must be on the path.

## Usage instructions:
Given a pLTL formula *f*, **pltl2tgba** extracts the pure-past subformulae and calls **ppLTLTT** to convert these into temporal testers. The original formula *f* with pure-past subformulae replaced with monitor variables is converted into an automaton by **LTL2TGBA**. Finally, this automaton and the temporal testers are combined by **autfilt**, resulting in an automaton recognizing exactly the models of *f*.

### Options
Available options:
```
  --include-boolean        Abstract subformulae with top-level boolean
                           connectives (if they contain past operators)
  AUTFILT_ARGS             Arguments to forward to autfilt
  -f,--formula FORMULA     Formula to process
  -F,--file FILE           File to process
  -h,--help                Show this help text
```

By default, **pltl2tgba** will abstract away maximal pure-past subformulae that do not include Boolean connectives. For example, the formula "Y p & Y q" will by default be converted into "z1 & z2", resulting in two temporal testers; one for "Y p" and one for "Y q". With the `--include-boolean` option, **pltl2tgba** will abstract away maximal pure-past subformulae *including* Boolean connectives, so that the entire formula "Y p & Y q" will be replaced by a single monitor variable "z!".

Any arguments not recognized by **pltl2tgba** are passed to **autfilt** at the end of the process. For example, we can obtain a deterministic automaton for "F G (p -> Y q)" using the argument `-D`, by executing the command `pltl2tgba -D -f 'F G (p -> Y q)'`.

### Syntax of pLTL formulae
The formula parser for **pltl2tgba** is written to resemble Spot's formula parser as closely as possible in terms of operator precedence and associativity.
See the following [documentation](https://spot.lre.epita.fr/tl.pdf) for a description. **pltl2tgba** supports the following Boolean operators:

| Symbol | Alternatives | Description |
| ----------- | ----------- | ----------- |
| ! | ~ | Negation
| & | &&, /\\ | Conjunction |
| \| | \|\|, \\/ | Disjunction
| -> | -->, => | Implication
| <-> | <-->, <=> | Equivalence
| ^ | xor | Exclusive disjunction |

Additionally, the following temporal operators are supported:

| Symbol | Alternatives | Description |
| ----------- | ----------- | ----------- |
| X | () | Next |
| G | [] | Globally |
| F | <> | Future |
| U | | Until |
| W | | Weak Until |
| R | V | Release |
| M | | Strong Release |
| H | [~] | Historically |
| O | <~> | Once |
| Y | (~) | Yesterday |
| T | | Weak Yesterday |
| S | | Since |
| Z | | Weak Since |

### Example of usage

Assuming that **pltl2tgba**, **ppLTLTT**, **ltl2tgba**, and **autfilt** are on the path, an automaton for "G (p -> Y q)" is generated by **ppltl2tgba** using the following command:
```
pltl2tgba -f 'G (p -> Y q)'
```
This will give the following output:
```
HOA: v1
States: 2
Start: 1
AP: 2 "p" "q"
acc-name: Buchi
Acceptance: 1 Inf(0)
properties: trans-labels explicit-labels state-acc colored
properties: deterministic weak
--BODY--
State: 0 {0}
[1] 0
[!1] 1
State: 1 {0}
[!0&1] 0
[!0&!1] 1
--END--
```
